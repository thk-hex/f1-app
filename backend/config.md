# Environment Variables Configuration

This document lists all environment variables needed for the F1 Champions Backend application.

## Required Environment Variables

### Database Configuration
- `DATABASE_URL`: PostgreSQL connection string (automatically provided by Render PostgreSQL)
  - Format: `postgresql://username:password@host:port/database?schema=public`

### Redis Configuration
- `REDIS_URL`: Redis connection string (automatically provided by Render Redis)
  - Format: `redis://user:password@host:port`
  - Used for caching to improve API performance

### Application Configuration
- `NODE_ENV`: Application environment (`development`, `production`)
- `PORT`: Port number for the application (default: 3000)

### CORS Configuration
- `ALLOWED_ORIGINS`: Comma-separated list of allowed origins for CORS
  - Development: `"*"` (allow all)
  - Production: Your frontend domain(s)

### F1 API Configuration (for data seeding)
- `BASE_URL`: Base URL for F1 API endpoints (optional, for seeding)
- `GP_START_YEAR`: Starting year for Grand Prix data (optional, default: 2005)

### Optional Configurations
- `JWT_SECRET`: Secret key for JWT tokens (if using authentication)
- `BCRYPT_ROUNDS`: Number of bcrypt rounds (if using password hashing)

## Render Environment Variables Setup

In your Render dashboard, you'll need to set:

1. `NODE_ENV` = `production` (for prod) or `development` (for dev)
2. `PORT` = `3000`
3. `DATABASE_URL` = (automatically set by connecting PostgreSQL database)
4. `REDIS_URL` = (automatically set by connecting Redis database)
5. `ALLOWED_ORIGINS` = your frontend URLs

Optional variables can be added as needed based on your application features.

## Services Created by render.yaml

The blueprint will create:

### Databases:
- `f1-app-db-prod` - Production PostgreSQL database
- `f1-app-db-dev` - Development PostgreSQL database
- `f1-app-redis-prod` - Production Redis cache
- `f1-app-redis-dev` - Development Redis cache

### Web Services:
- `f1-app-backend-prod` - Production backend API
- `f1-app-backend-dev` - Development backend API

### Database Administration:

For **local development**, database administration is handled via Docker Compose with pgAdmin.

For **production and staging environments**, you can:
1. **Access databases directly** using credentials from the Render dashboard
2. **Use psql** or other PostgreSQL command-line tools
3. **Connect via your local pgAdmin** using external connection settings
4. **Use Render's built-in database management** tools in the dashboard

### Database Connection Details:

You can find your database connection details in the Render dashboard:
- **Host**: Available in service environment variables
- **Port**: 5432 (PostgreSQL default)
- **Database Name**: Set in render.yaml configuration  
- **Username**: Set in render.yaml configuration
- **Password**: Generated by Render (visible in dashboard)

### Connecting Local pgAdmin to Render Databases:

To manage your Render databases from your local pgAdmin:

1. **Get connection details** from your Render dashboard
2. **Add new server** in pgAdmin
3. **Configure connection**:
   - Host: Your Render database host
   - Port: 5432
   - Database: Your database name
   - Username: Your database username
   - Password: Your database password (from Render dashboard)

**Security Notes:**
- Always use SSL connections for external database access
- Keep database credentials secure and rotate them regularly
- Consider IP allowlisting for additional security
- Use strong, unique passwords for each environment

All services are configured on the free tier and will be automatically connected via environment variables. 